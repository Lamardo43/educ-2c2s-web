{% extends 'base.html' %}

{% block content %}
    <h1> User List </h1>
    <table class="table">
        <thead>
            <tr>
                <th> № </th>
                <th> login </th>
                <th> last_name </th>
                <th> first_name </th>
                <th> middle_name </th>
                <th> role </th>
                <th> created_at </th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr>
                <td> {{loop.index}} </td>
                <td> {{user.login}} </td>
                <td> {{user.last_name}} </td>
                <td> {{user.first_name}} </td>
                <td> {% if user.middle_name %} {{user.middle_name}} {% endif %}</td>
                <td> {{user.role}}</td>
                <td> {{user.created_at}} </td>
                {% if current_user.is_authenticated %}
                <td> 
                    <a class="btn btn-primary" href="{{ url_for('users_view', user_id=user.id) }}">View</a> 
                    <a class="btn btn-primary" href="{{ url_for('users_edit', user_id=user.id) }}">Edit</a> 
                    <button class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteModal" data-user-id="{{ user.id }}">Delete</button>
                </td> 
                {% endif %}		   
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% if current_user.is_authenticated %}
    <a href="{{ url_for('users_new') }}" class="btn btn-primary">Добавить пользователя</a>
    {% endif %}
{% endblock %}